<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Event Bot Manager</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Server Icons -->
        <div class="server-list">
            <div class="server-icon active" onclick="switchToMainView()">ğŸ®</div>
            <div class="server-icon" onclick="switchToSettingsView()">âš™ï¸</div>
        </div>

        <!-- Channel List / Navigation -->
        <div id="channelList" class="channel-list">
            <div class="channel-category" id="eventsCategory">
                <div class="channel-category-title">ğŸ“… EVENTS</div>
                <div class="channel-item active" onclick="switchTab('events')">ğŸ“… All Events</div>
                <div class="channel-item" onclick="switchTab('create-event')">â• Create Event</div>
            </div>
            <div class="channel-category" id="presetsCategory">
                <div class="channel-category-title">ğŸ“‹ PRESETS</div>
                <div class="channel-item" onclick="switchTab('presets')">ğŸ“‹ Presets</div>
                <div class="channel-item" onclick="switchTab('create-preset')">ğŸ¨ Create Preset</div>
                <div class="channel-item" onclick="switchTab('create-from-preset')">âœ¨ From Preset</div>
            </div>
            <div class="channel-category hidden" id="configCategory">
                <div class="channel-category-title">âš™ï¸ CONFIGURATION</div>
                <div class="channel-item" onclick="switchTab('server-settings')">âš™ï¸ Server Settings</div>
                <div class="channel-item" onclick="switchTab('twitch')">ğŸ® Twitch</div>
                <div class="channel-item" onclick="switchTab('youtube')">ğŸ“º YouTube</div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="content-area">
            <header class="app-header">
                <h1>Discord Event Bot Manager</h1>
                <div class="auth-section">
                    <span id="authStatus" class="status unauthenticated">ğŸ”’ Not authenticated</span>
                </div>
            </header>

            <!-- API Authentication -->
            <div class="card auth-card">
                <h2>ğŸ” API Authentication</h2>
                <p>Enter your API key to access protected endpoints:</p>
                <div class="input-group">
                    <input type="password" id="apiKeyInput" placeholder="API Key" class="input-field">
                    <button class="btn btn-primary" onclick="saveApiKey()">Save Key</button>
                </div>
                <div id="apiKeyAlert" class="alert hidden"></div>
            </div>

            <!-- Dashboard Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Total Events</div>
                    <div class="stat-value" id="totalEvents">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Upcoming</div>
                    <div class="stat-value" id="upcomingEvents">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Total Signups</div>
                    <div class="stat-value" id="totalSignups">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Presets</div>
                    <div class="stat-value" id="totalPresets">0</div>
                </div>
            </div>

            <!-- Events Tab -->
            <div id="events" class="tab-content active">
                <h2>ğŸ“… All Events</h2>
                <button class="btn btn-secondary" onclick="loadEvents()">ğŸ”„ Refresh</button>
                <div id="eventsContainer" class="events-grid">Loading events...</div>
            </div>

            <!-- Create Event Tab -->
            <div id="create-event" class="tab-content">
                <h2>â• Create New Event</h2>
                <div id="createEventAlert" class="alert hidden"></div>
                <form class="form-container" onsubmit="event.preventDefault(); createEvent()">
                    <div class="form-group">
                        <label>Event Title *</label>
                        <input type="text" id="eventTitle" class="input-field" required>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="eventDescription" class="input-field" rows="3"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Date & Time *</label>
                            <input type="datetime-local" id="eventDateTime" class="input-field" required>
                        </div>
                        <div class="form-group">
                            <label>Duration (minutes)</label>
                            <input type="number" id="eventDuration" class="input-field" value="60" min="1">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Max Participants (0 = unlimited)</label>
                        <input type="number" id="eventMaxParticipants" class="input-field" value="0" min="0">
                    </div>
                    <div class="form-group">
                        <label>Roles</label>
                        <div id="eventRolesContainer" class="roles-container">
                            <div class="role-row">
                                <input type="text" placeholder="Emoji" class="role-emoji input-field">
                                <input type="text" placeholder="Role name" class="role-name input-field">
                                <input type="number" placeholder="Max slots" class="role-slots input-field" min="0">
                                <button type="button" class="btn btn-danger" onclick="removeEventRoleRow(this)">âœ•</button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-secondary" onclick="addEventRoleRow()">+ Add Role</button>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="resetEventForm()">Reset</button>
                        <button type="submit" class="btn btn-primary">Create Event</button>
                    </div>
                </form>
            </div>

            <!-- Presets Tab -->
            <div id="presets" class="tab-content">
                <h2>ğŸ“‹ Event Presets</h2>
                <button class="btn btn-secondary" onclick="loadPresets()">ğŸ”„ Refresh</button>
                <div id="presetsContainer" class="presets-grid">Loading presets...</div>
            </div>

            <!-- Create Preset Tab -->
            <div id="create-preset" class="tab-content">
                <h2>ğŸ¨ Create New Preset</h2>
                <div id="createPresetAlert" class="alert hidden"></div>
                <form class="form-container" onsubmit="event.preventDefault(); createPreset()">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Preset ID *</label>
                            <input type="text" id="presetId" class="input-field" placeholder="e.g., raid-friday" required>
                            <small class="form-hint">Lowercase letters, numbers, and hyphens only</small>
                        </div>
                        <div class="form-group">
                            <label>Preset Name *</label>
                            <input type="text" id="presetName" class="input-field" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="presetDescription" class="input-field" rows="2"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Default Duration (minutes)</label>
                            <input type="number" id="presetDuration" class="input-field" value="60" min="1">
                        </div>
                        <div class="form-group">
                            <label>Default Max Participants (0 = unlimited)</label>
                            <input type="number" id="presetMaxParticipants" class="input-field" value="0" min="0">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Roles</label>
                        <div id="presetRolesContainer" class="roles-container">
                            <div class="role-row">
                                <input type="text" placeholder="Emoji" class="role-emoji input-field">
                                <input type="text" placeholder="Role name" class="role-name input-field">
                                <input type="number" placeholder="Max slots" class="role-slots input-field" min="0">
                                <button type="button" class="btn btn-danger" onclick="removePresetRoleRow(this)">âœ•</button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-secondary" onclick="addPresetRoleRow()">+ Add Role</button>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="resetPresetForm()">Reset</button>
                        <button type="submit" class="btn btn-primary">Create Preset</button>
                    </div>
                </form>
            </div>

            <!-- Create from Preset Tab -->
            <div id="create-from-preset" class="tab-content">
                <h2>âœ¨ Create Event from Preset</h2>
                <div id="createFromPresetAlert" class="alert hidden"></div>
                <form class="form-container" onsubmit="event.preventDefault(); createEventFromPreset()">
                    <div class="form-group">
                        <label>Select Preset *</label>
                        <select id="fromPresetSelect" class="input-field" required>
                            <option value="">-- Choose a preset --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Date & Time *</label>
                        <input type="datetime-local" id="fromPresetDateTime" class="input-field" required>
                    </div>
                    <div class="form-group">
                        <label>Custom Description (optional)</label>
                        <textarea id="fromPresetDescription" class="input-field" rows="2"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Create Event</button>
                    </div>
                </form>
            </div>

            <!-- Server Settings Tab -->
            <div id="server-settings" class="tab-content">
                <h2>âš™ï¸ Server Settings</h2>
                <div class="form-group">
                    <label>Select Server (Guild)</label>
                    <select id="settingsGuildId" class="input-field" onchange="loadGuildSettings(this.value)">
                        <option value="">-- Loading servers...</option>
                    </select>
                </div>
                <div id="noGuildSelected" class="info-box">
                    <p>â„¹ï¸ Select a server first</p>
                    <p>Choose a Discord server from the dropdown above to configure its settings.</p>
                </div>
                <div id="settingsContent" class="hidden">
                    <h3>ğŸ“¢ Event Channel</h3>
                    <p>Channel where events will be posted and managed</p>
                    <div class="form-group">
                        <input type="text" id="eventChannelInput" class="input-field" placeholder="Channel ID">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-danger" onclick="clearEventChannel()">Clear Channel</button>
                        <button type="button" class="btn btn-primary" onclick="saveEventChannel()">Save Channel</button>
                    </div>
                    <div id="eventChannelStatus" class="alert hidden"></div>

                    <h3>ğŸ”” Notification Channel</h3>
                    <p>Channel where streaming notifications will be posted</p>
                    <div class="form-group">
                        <input type="text" id="notificationChannelInput" class="input-field" placeholder="Channel ID">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-primary" onclick="saveNotificationChannel()">Save Channel</button>
                    </div>
                    <div id="notificationStatus" class="alert hidden"></div>
                </div>
            </div>

            <!-- Twitch Configuration Tab -->
            <div id="twitch" class="tab-content">
                <h2>ğŸ® Twitch Configuration</h2>
                <div class="form-group">
                    <label>Select Server (Guild)</label>
                    <select id="twitchGuildId" class="input-field" onchange="loadTwitchGuildSettings(this.value)">
                        <option value="">-- Loading servers...</option>
                    </select>
                </div>
                <div id="noTwitchGuildSelected" class="info-box">
                    <p>â„¹ï¸ Select a server first</p>
                    <p>Choose a Discord server from the dropdown above to configure Twitch streamers.</p>
                </div>
                <div id="twitchSettingsContent" class="hidden">
                    <h3>ğŸ® Twitch Streamers</h3>
                    <p>Monitor Twitch streamers for live notifications</p>
                    <div id="twitchContainer" class="streamers-container">
                        <div class="streamer-row">
                            <input type="text" placeholder="Twitch username (e.g., ninja)" class="twitch-username input-field">
                            <button type="button" class="btn btn-danger" style="padding: 6px; min-width: 36px;" onclick="this.parentElement.remove()">âœ•</button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary" onclick="addTwitchRow()">+ Add Streamer</button>
                    <div class="form-actions">
                        <button type="button" class="btn btn-primary" onclick="saveTwitchConfig()">Save Streamers</button>
                    </div>
                    <div id="twitchStatus" class="alert hidden"></div>
                </div>
            </div>

            <!-- YouTube Configuration Tab -->
            <div id="youtube" class="tab-content">
                <h2>ğŸ“º YouTube Configuration</h2>
                <div class="form-group">
                    <label>Select Server (Guild)</label>
                    <select id="youtubeGuildId" class="input-field" onchange="loadYouTubeGuildSettings(this.value)">
                        <option value="">-- Loading servers...</option>
                    </select>
                </div>
                <div id="noYouTubeGuildSelected" class="info-box">
                    <p>â„¹ï¸ Select a server first</p>
                    <p>Choose a Discord server from the dropdown above to configure YouTube channels.</p>
                </div>
                <div id="youtubeSettingsContent" class="hidden">
                    <h3>ğŸ“º YouTube Channels</h3>
                    <p>Monitor YouTube channels for new video uploads</p>
                    <div id="youtubeContainer" class="streamers-container">
                        <div class="youtube-row">
                            <input type="text" placeholder="Channel ID or URL" class="youtube-channel input-field">
                            <button type="button" class="btn btn-danger" style="padding: 6px; min-width: 36px;" onclick="this.parentElement.remove()">âœ•</button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary" onclick="addYouTubeRow()">+ Add Channel</button>
                    <div class="form-actions">
                        <button type="button" class="btn btn-primary" onclick="saveYouTubeConfig()">Save Channels</button>
                    </div>
                    <div id="youtubeStatus" class="alert hidden"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>